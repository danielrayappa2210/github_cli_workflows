name: Get GitHub Users

on:
  workflow_dispatch: # Allows you to manually trigger the workflow

jobs:
  get_users:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Get GitHub Users
        run: |
          SEARCH_RESULT=$(curl -s "https://api.github.com/search/users?q=location:Bangalore+followers:>110&per_page=100" | jq '.items[] | {login, name: .user.name, location: .user.location, followers: .user.followers, created_at: .user.created_at}')
          echo "$SEARCH_RESULT" > users.json
          echo "Search results saved to users.json" # Confirmation message

      - name: Upload artifact
        uses: actions/upload-artifact@v4
        with:
          name: users-data
          path: users.json
